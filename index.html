<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEPANN'FROID - Factures Devis Relances Pro</title>
    <meta name="description" content="Syst√®me complet de gestion de factures pour DEPANN'FROID">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='75' font-size='75'%3E‚ùÑÔ∏è%3C/text%3E%3C/svg%3E">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        @keyframes bounce { 0%, 100% { transform: translateY(-25%); } 50% { transform: translateY(0); } }
        .animate-spin { animation: spin 1s linear infinite; }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        .animate-bounce { animation: bounce 1s infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Mock storage pour navigateur
        if (!window.storage) {
            window.storage = {
                async get(key) {
                    const value = localStorage.getItem(key);
                    return value ? { key, value } : null;
                },
                async set(key, value) {
                    localStorage.setItem(key, value);
                    return { key, value };
                },
                async delete(key) {
                    localStorage.removeItem(key);
                    return { key, deleted: true };
                }
            };
        }

        // Ic√¥nes SVG
        const Icons = {
            Send: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>,
            Receipt: () => <svg className="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" /></svg>,
            Copy: () => <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>,
            Check: () => <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>,
            Download: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>,
            History: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
            BarChart: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>,
            Mail: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>,
            Upload: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" /></svg>,
            FileText: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>,
            Trash: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>,
            Bell: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>,
            X: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" /></svg>,
            Calculator: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" /></svg>,
            FileSignature: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>,
        };

        function App() {
            const [activeTab, setActiveTab] = useState('new');
            const [documentType, setDocumentType] = useState('invoice');
            const [clientName, setClientName] = useState('');
            const [documentNumber, setDocumentNumber] = useState('');
            const [amount, setAmount] = useState('');
            const [dueDate, setDueDate] = useState('');
            const [issueDate, setIssueDate] = useState('');
            const [serviceDescription, setServiceDescription] = useState('');
            const [validityDays, setValidityDays] = useState('30');
            const [daysOverdue, setDaysOverdue] = useState('');
            const [generatedEmail, setGeneratedEmail] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [copied, setCopied] = useState(false);
            const [history, setHistory] = useState([]);
            const [signature, setSignature] = useState('Lionel - G√©rant DEPANN\'FROID');
            const [reminders, setReminders] = useState([]);
            const [showReminders, setShowReminders] = useState(false);
            const [stats, setStats] = useState({
                totalSent: 0,
                totalAmount: 0,
                totalRecovered: 0,
                pendingAmount: 0,
                byType: {}
            });

            const formatNumber = (num) => {
                return new Intl.NumberFormat('fr-FR').format(num);
            };

            const calculatePenalties = () => {
                if (!amount || !daysOverdue) return { penalties: 0, total: 0 };
                const amountNum = parseFloat(amount.replace(/\s/g, ''));
                const days = parseInt(daysOverdue);
                const penalties = Math.round((amountNum * 18 * days) / (365 * 100));
                const total = amountNum + penalties + 4800;
                return { penalties, total };
            };

            const { penalties, total } = calculatePenalties();

            useEffect(() => {
                loadHistory();
                checkReminders();
            }, []);

            const loadHistory = async () => {
                try {
                    const result = await window.storage.get('invoice-history');
                    if (result && result.value) {
                        const historyData = JSON.parse(result.value);
                        setHistory(historyData);
                        calculateStats(historyData);
                    }
                } catch (error) {
                    console.log('Historique vide');
                }
            };

            const calculateStats = (data) => {
                const newStats = {
                    totalSent: data.length,
                    totalAmount: 0,
                    totalRecovered: 0,
                    pendingAmount: 0,
                    byType: {
                        invoice: 0,
                        quote: 0,
                        reminder1: 0,
                        reminder2: 0,
                        final: 0
                    }
                };

                data.forEach(entry => {
                    newStats.totalAmount += entry.amount;
                    if (entry.status === 'paid') {
                        newStats.totalRecovered += entry.totalDue || entry.amount;
                    } else {
                        newStats.pendingAmount += entry.totalDue || entry.amount;
                    }
                    if (newStats.byType[entry.type] !== undefined) {
                        newStats.byType[entry.type]++;
                    }
                });

                setStats(newStats);
            };

            const checkReminders = () => {
                // Simulation de rappels
                const alerts = [
                    { id: 1, client: 'Restaurant Le Mahana', docNumber: 'FAC-2024-156', daysUntil: 3, type: 'upcoming', amount: 85000 },
                    { id: 2, client: 'H√¥tel Tiare', docNumber: 'FAC-2024-142', daysOverdue: 15, type: 'overdue', amount: 95681 }
                ];
                setReminders(alerts);
            };

            const generateEmail = async () => {
                if (!clientName || !documentNumber || !amount) return;
                
                setIsLoading(true);
                
                setTimeout(() => {
                    let email = '';
                    
                    if (documentType === 'invoice') {
                        email = `Bonjour ${clientName},

Suite √† notre intervention, veuillez trouver ci-joint la facture N¬∞ ${documentNumber} d'un montant de ${formatNumber(amount)} XPF.

Date d'√©ch√©ance : ${dueDate || '√Ä d√©finir'}

${serviceDescription ? `Service fourni : ${serviceDescription}\n\n` : ''}Conditions de r√®glement : Paiement √† 30 jours
En cas de retard de paiement, p√©nalit√©s exigibles de plein droit :
- Taux d'int√©r√™t : 18% par an
- Indemnit√© forfaitaire de recouvrement : 4 800 XPF

Nous restons √† votre disposition pour toute question.

Cordialement,
${signature}
Moorea, Polyn√©sie Fran√ßaise`;
                    } else if (documentType === 'quote') {
                        email = `Bonjour ${clientName},

Suite √† votre demande, veuillez trouver ci-joint notre devis N¬∞ ${documentNumber} d'un montant de ${formatNumber(amount)} XPF.

${serviceDescription ? `Prestation propos√©e : ${serviceDescription}\n\n` : ''}Ce devis est valable ${validityDays} jours √† compter de ce jour.

Notre expertise de 15 ans dans la maintenance frigorifique en Polyn√©sie fran√ßaise vous garantit un service de qualit√© et une disponibilit√© optimale.

N'h√©sitez pas √† nous contacter pour toute question ou pr√©cision.

Nous restons √† votre disposition pour valider ce devis.

Cordialement,
${signature}
Moorea, Polyn√©sie Fran√ßaise`;
                    } else if (documentType === 'reminder1') {
                        email = `Bonjour ${clientName},

Nous vous contactons concernant la facture N¬∞ ${documentNumber} d'un montant de ${formatNumber(amount)} XPF, √©chue le ${dueDate}.

${serviceDescription ? `Rappel du service : ${serviceDescription}\n\n` : ''}`;
                        if (daysOverdue && parseInt(daysOverdue) > 0) {
                            email += `Nous constatons un retard de ${daysOverdue} jours.

Conform√©ment √† la loi du Pays n¬∞ 2015-4, les p√©nalit√©s suivantes s'appliquent :
- P√©nalit√©s de retard (18%/an) : ${formatNumber(penalties)} XPF
- Indemnit√© forfaitaire : 4 800 XPF
TOTAL D√õ : ${formatNumber(total)} XPF

`;
                        }
                        email += `Nous comprenons que des difficult√©s peuvent survenir. N'h√©sitez pas √† nous contacter pour envisager un arrangement si n√©cessaire.

Nous vous remercions de r√©gulariser cette situation rapidement.

Cordialement,
${signature}`;
                    } else if (documentType === 'reminder2') {
                        email = `Bonjour ${clientName},

Malgr√© notre pr√©c√©dente relance, nous constatons que la facture N¬∞ ${documentNumber} demeure impay√©e.

Montant initial : ${formatNumber(amount)} XPF
Retard : ${daysOverdue} jours

D√âCOMPTE DES SOMMES DUES :
- Montant initial : ${formatNumber(amount)} XPF
- P√©nalit√©s (18%/an) : ${formatNumber(penalties)} XPF
- Indemnit√© forfaitaire : 4 800 XPF
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL D√õ : ${formatNumber(total)} XPF

Nous vous demandons de r√©gulariser cette situation sous 8 jours.

√Ä d√©faut, nous serons contraints d'engager une proc√©dure de recouvrement.

Nous restons ouverts au dialogue pour trouver une solution amiable.

Cordialement,
${signature}`;
                    } else {
                        email = `MISE EN DEMEURE

${clientName}

Objet : Facture impay√©e N¬∞ ${documentNumber}

Monsieur, Madame,

Malgr√© nos relances pr√©c√©dentes, nous constatons que notre facture N¬∞ ${documentNumber} demeure impay√©e.

MONTANTS EXIGIBLES :
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Montant principal : ${formatNumber(amount)} XPF      ‚îÇ
‚îÇ P√©nalit√©s (18%/an) : ${formatNumber(penalties)} XPF ‚îÇ
‚îÇ Indemnit√© forfaitaire : 4 800 XPF          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ TOTAL EXIGIBLE : ${formatNumber(total)} XPF          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

D√âLAI IMP√âRATIF : 8 JOURS

√Ä d√©faut de r√®glement, nous engagerons SANS AUTRE AVIS :
- Proc√©dure judiciaire de recouvrement
- Saisie du Tribunal de Papeete
- Frais de justice √† votre charge

Fait pour valoir ce que de droit.

${signature}
${new Date().toLocaleDateString('fr-FR')}`;
                    }
                    
                    setGeneratedEmail(email);
                    saveToHistory();
                    setIsLoading(false);
                }, 1000);
            };

            const saveToHistory = async () => {
                const newEntry = {
                    id: Date.now(),
                    date: new Date().toISOString(),
                    type: documentType,
                    clientName,
                    documentNumber,
                    amount: parseFloat(amount.replace(/\s/g, '')),
                    dueDate,
                    daysOverdue: daysOverdue || 0,
                    penaltiesAmount: penalties,
                    totalDue: total || parseFloat(amount.replace(/\s/g, '')),
                    email: generatedEmail,
                    status: 'sent'
                };

                const updatedHistory = [newEntry, ...history];
                setHistory(updatedHistory);
                
                try {
                    await window.storage.set('invoice-history', JSON.stringify(updatedHistory));
                    calculateStats(updatedHistory);
                } catch (error) {
                    console.error('Erreur sauvegarde');
                }
            };

            const updateEntryStatus = async (id, newStatus) => {
                const updatedHistory = history.map(entry => 
                    entry.id === id ? { ...entry, status: newStatus } : entry
                );
                setHistory(updatedHistory);
                
                try {
                    await window.storage.set('invoice-history', JSON.stringify(updatedHistory));
                    calculateStats(updatedHistory);
                } catch (error) {
                    console.error('Erreur mise √† jour');
                }
            };

            const deleteEntry = async (id) => {
                const updatedHistory = history.filter(entry => entry.id !== id);
                setHistory(updatedHistory);
                
                try {
                    await window.storage.set('invoice-history', JSON.stringify(updatedHistory));
                    calculateStats(updatedHistory);
                } catch (error) {
                    console.error('Erreur suppression');
                }
            };

            const copyToClipboard = async () => {
                await navigator.clipboard.writeText(generatedEmail);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const exportToPDF = () => {
                const content = `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
              DEPANN'FROID
      Maintenance Frigorifique - PF
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

${documentType === 'quote' ? 'DEVIS' : documentType === 'invoice' ? 'FACTURE' : 'RELANCE'}

Date: ${new Date().toLocaleDateString('fr-FR')}
Document N¬∞: ${documentNumber}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
CLIENT: ${clientName}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Montant: ${formatNumber(amount)} XPF
${dueDate ? `√âch√©ance: ${dueDate}` : ''}
${daysOverdue ? `Retard: ${daysOverdue} jours` : ''}

${penalties > 0 ? `
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
P√âNALIT√âS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Montant initial:        ${formatNumber(amount)} XPF
P√©nalit√©s (18%):        ${formatNumber(penalties)} XPF
Indemnit√©:              4 800 XPF
                       ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL D√õ:               ${formatNumber(total)} XPF
` : ''}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
MESSAGE
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

${generatedEmail}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
${signature}
${new Date().toLocaleDateString('fr-FR')}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                `;

                const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${documentType}-${documentNumber}-${new Date().toISOString().split('T')[0]}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            };

            const documentTypes = [
                { value: 'invoice', label: '√âmission Facture', icon: 'üìÑ', color: 'blue' },
                { value: 'quote', label: '√âmission Devis', icon: 'üìã', color: 'green' },
                { value: 'reminder1', label: '1√®re Relance', icon: 'üìß', color: 'yellow' },
                { value: 'reminder2', label: '2√®me Relance', icon: '‚ö†Ô∏è', color: 'orange' },
                { value: 'final', label: 'Relance Finale', icon: 'üö®', color: 'red' }
            ];

            const getColorClasses = (color) => {
                const colors = {
                    blue: { bg: 'bg-blue-100', border: 'border-blue-500', hover: 'hover:bg-blue-50' },
                    green: { bg: 'bg-green-100', border: 'border-green-500', hover: 'hover:bg-green-50' },
                    yellow: { bg: 'bg-yellow-100', border: 'border-yellow-500', hover: 'hover:bg-yellow-50' },
                    orange: { bg: 'bg-orange-100', border: 'border-orange-500', hover: 'hover:bg-orange-50' },
                    red: { bg: 'bg-red-100', border: 'border-red-500', hover: 'hover:bg-red-50' }
                };
                return colors[color];
            };

            const isReminderType = ['reminder1', 'reminder2', 'final'].includes(documentType);

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
                    {/* Notifications */}
                    {reminders.length > 0 && (
                        <div className="fixed top-4 right-4 z-50 max-w-md">
                            <div className="bg-white rounded-lg shadow-2xl border-2 border-orange-400 p-4 animate-pulse">
                                <div className="flex items-center justify-between mb-3">
                                    <div className="flex items-center gap-2">
                                        <Icons.Bell />
                                        <h3 className="font-bold text-slate-800">Rappels ({reminders.length})</h3>
                                    </div>
                                    <button onClick={() => setShowReminders(!showReminders)} className="text-slate-400 hover:text-slate-600">
                                        {showReminders ? <Icons.X /> : 'üëÅÔ∏è'}
                                    </button>
                                </div>
                                {showReminders && (
                                    <div className="space-y-2 max-h-64 overflow-y-auto">
                                        {reminders.map(reminder => (
                                            <div key={reminder.id} className={`p-3 rounded-lg ${reminder.type === 'overdue' ? 'bg-red-50 border border-red-200' : 'bg-yellow-50 border border-yellow-200'}`}>
                                                <div className="font-medium text-sm">{reminder.client}</div>
                                                <div className="text-xs text-slate-600">{reminder.docNumber}</div>
                                                <div className="text-xs font-semibold mt-1">
                                                    {reminder.type === 'overdue' ? (
                                                        <span className="text-red-600">‚ö†Ô∏è Retard: {reminder.daysOverdue} jours - {formatNumber(reminder.amount)} XPF</span>
                                                    ) : (
                                                        <span className="text-orange-600">üìÖ √âch√©ance dans {reminder.daysUntil} jours</span>
                                                    )}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Header */}
                    <div className="relative overflow-hidden">
                        <div className="absolute inset-0 bg-gradient-to-r from-blue-600/5 to-indigo-600/5"></div>
                        <div className="relative max-w-7xl mx-auto px-6 py-6">
                            <div className="text-center">
                                <div className="inline-flex items-center justify-center w-14 h-14 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl mb-3 shadow-lg">
                                    <Icons.Receipt />
                                </div>
                                <h1 className="text-2xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent mb-1">
                                    Factures Devis Relances Pro
                                </h1>
                                <p className="text-sm text-slate-600">DEPANN'FROID - Solution Compl√®te</p>
                            </div>
                        </div>
                    </div>

                    {/* Navigation Tabs */}
                    <div className="max-w-7xl mx-auto px-6 mb-6">
                        <div className="bg-white/70 backdrop-blur-sm rounded-xl p-2 shadow-lg border border-white/20">
                            <div className="flex gap-2 flex-wrap">
                                {[
                                    { id: 'new', label: 'Nouveau', icon: Icons.FileText },
                                    { id: 'history', label: 'Historique', icon: Icons.History },
                                    { id: 'stats', label: 'Statistiques', icon: Icons.BarChart },
                                    { id: 'letters', label: 'Lettres AR', icon: Icons.Mail },
                                    { id: 'signature', label: 'Signature', icon: Icons.FileSignature }
                                ].map(tab => {
                                    const Icon = tab.icon;
                                    return (
                                        <button
                                            key={tab.id}
                                            onClick={() => setActiveTab(tab.id)}
                                            className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all text-sm ${
                                                activeTab === tab.id
                                                    ? 'bg-blue-600 text-white shadow-md'
                                                    : 'text-slate-600 hover:bg-slate-100'
                                            }`}
                                        >
                                            <Icon />
                                            {tab.label}
                                        </button>
                                    );
                                })}
                            </div>
                        </div>
                    </div>

                    {/* Content */}
                    <div className="max-w-7xl mx-auto px-6 pb-12">
                        {activeTab === 'new' && (
                            <div className="grid lg:grid-cols-2 gap-6">
                                {/* Input Column */}
                                <div className="space-y-4">
                                    <div className="bg-white/70 backdrop-blur-sm rounded-xl p-5 shadow-xl border border-white/20">
                                        <h2 className="text-lg font-semibold text-slate-800 mb-3">Type de Document</h2>
                                        <div className="grid grid-cols-2 gap-2">
                                            {documentTypes.map((type) => {
                                                const colors = getColorClasses(type.color);
                                                return (
                                                    <button
                                                        key={type.value}
                                                        onClick={() => setDocumentType(type.value)}
                                                        className={`p-3 rounded-lg border-2 transition-all text-left ${
                                                            documentType === type.value
                                                                ? `${colors.border} ${colors.bg} shadow-md`
                                                                : `border-slate-200 bg-white/50 ${colors.hover}`
                                                        }`}
                                                    >
                                                        <div className="flex items-center gap-2 mb-1">
                                                            <span className="text-lg">{type.icon}</span>
                                                            <div className="font-semibold text-xs text-slate-800">{type.label}</div>
                                                        </div>
                                                    </button>
                                                );
                                            })}
                                        </div>
                                    </div>

                                    <div className="bg-white/70 backdrop-blur-sm rounded-xl p-5 shadow-xl border border-white/20">
                                        <h2 className="text-lg font-semibold text-slate-800 mb-3">Informations</h2>
                                        <div className="space-y-3">
                                            <input
                                                type="text"
                                                value={clientName}
                                                onChange={(e) => setClientName(e.target.value)}
                                                placeholder="Nom du client *"
                                                className="w-full p-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white/50"
                                            />
                                            
                                            <div className="grid grid-cols-2 gap-2">
                                                <input
                                                    type="text"
                                                    value={documentNumber}
                                                    onChange={(e) => setDocumentNumber(e.target.value)}
                                                    placeholder={documentType === 'quote' ? 'N¬∞ Devis *' : 'N¬∞ Facture *'}
                                                    className="w-full p-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white/50"
                                                />
                                                <input
                                                    type="text"
                                                    value={amount}
                                                    onChange={(e) => setAmount(e.target.value)}
                                                    placeholder="Montant XPF *"
                                                    className="w-full p-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white/50"
                                                />
                                            </div>

                                            <div className="grid grid-cols-2 gap-2">
                                                {documentType === 'quote' ? (
                                                    <>
                                                        <input type="text" value={issueDate} onChange={(e) => setIssueDate(e.target.value)} placeholder="Date √©mission" className="w-full p-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white/50" />
                                                        <input type="text" value={validityDays} onChange={(e) => setValidityDays(e.target.value)} placeholder="Validit√© (jours)" className="w-full p-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white/50" />
                                                    </>
                                                ) : (
                                                    <>
                                                        <input type="text" value={isReminderType ? dueDate : issueDate} onChange={(e) => isReminderType ? setDueDate(e.target.value) : setIssueDate(e.target.value)} placeholder={isReminderType ? 'Date √©ch√©ance' : 'Date √©mission'} className="w-full p-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white/50" />
                                                        {isReminderType ? (
                                                            <input type="text" value={daysOverdue} onChange={(e) => setDaysOverdue(e.target.value)} placeholder="Jours retard" className="w-full p-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white/50" />
                                                        ) : (
                                                            <input type="text" value={dueDate} onChange={(e) => setDueDate(e.target.value)} placeholder="Date √©ch√©ance" className="w-full p-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white/50" />
                                                        )}
                                                    </>
                                                )}
                                            </div>

                                            <textarea
                                                value={serviceDescription}
                                                onChange={(e) => setServiceDescription(e.target.value)}
                                                placeholder="Description du service"
                                                className="w-full h-16 p-2 border border-slate-200 rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-500 bg-white/50"
                                            />
                                        </div>
                                    </div>

                                    {isReminderType && daysOverdue && amount && parseInt(daysOverdue) > 0 && (
                                        <div className="bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-4 shadow-xl border border-orange-200">
                                            <div className="flex items-center gap-2 mb-3">
                                                <Icons.Calculator />
                                                <h2 className="text-base font-semibold text-slate-800">Calcul P√©nalit√©s</h2>
                                            </div>
                                            <div className="space-y-2 text-sm">
                                                <div className="flex justify-between"><span>Montant initial</span><span className="font-semibold">{formatNumber(amount)} XPF</span></div>
                                                <div className="flex justify-between"><span>P√©nalit√©s (18%)</span><span className="font-semibold text-orange-600">{formatNumber(penalties)} XPF</span></div>
                                                <div className="flex justify-between"><span>Indemnit√©</span><span className="font-semibold text-orange-600">4 800 XPF</span></div>
                                                <div className="flex justify-between pt-2 border-t-2 border-orange-300"><span className="font-bold">TOTAL D√õ</span><span className="text-lg font-bold text-red-600">{formatNumber(total)} XPF</span></div>
                                            </div>
                                        </div>
                                    )}

                                    <button
                                        onClick={generateEmail}
                                        disabled={isLoading || !clientName || !documentNumber || !amount}
                                        className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
                                    >
                                        {isLoading ? (
                                            <><div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>G√©n√©ration...</>
                                        ) : (
                                            <><Icons.Send />G√©n√©rer l'Email</>
                                        )}
                                    </button>
                                </div>

                                {/* Output Column */}
                                <div className="space-y-4">
                                    <div className="bg-white/70 backdrop-blur-sm rounded-xl p-5 shadow-xl border border-white/20 min-h-96">
                                        <div className="flex items-center justify-between mb-3">
                                            <h2 className="text-lg font-semibold text-slate-800">Email G√©n√©r√©</h2>
                                            <div className="flex gap-2">
                                                {generatedEmail && (
                                                    <>
                                                        <button onClick={copyToClipboard} className="flex items-center gap-1 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 rounded-lg text-xs font-medium">
                                                            {copied ? <><Icons.Check />Copi√©</> : <><Icons.Copy />Copier</>}
                                                        </button>
                                                        <button onClick={exportToPDF} className="flex items-center gap-1 px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg text-xs font-medium">
                                                            <Icons.Download />PDF
                                                        </button>
                                                    </>
                                                )}
                                            </div>
                                        </div>
                                        {generatedEmail ? (
                                            <div className="bg-white/80 rounded-lg p-4 border border-slate-200 max-h-[500px] overflow-y-auto">
                                                <pre className="whitespace-pre-wrap font-sans text-slate-700 text-sm leading-relaxed">{generatedEmail}</pre>
                                            </div>
                                        ) : (
                                            <div className="flex flex-col items-center justify-center h-48 text-slate-400">
                                                <Icons.Receipt />
                                                <p className="text-sm mt-3">Votre email appara√Ætra ici</p>
                                            </div>
                                        )}
                                    </div>

                                    <div className="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-100">
                                        <h3 className="font-semibold text-slate-800 mb-2 text-sm">üìã Infos L√©gales PF</h3>
                                        <ul className="text-xs text-slate-600 space-y-1">
                                            <li>‚Ä¢ Taux: 18%/an (min 11,13%)</li>
                                            <li>‚Ä¢ Indemnit√©: 4 800 XPF/facture</li>
                                            <li>‚Ä¢ D√©lai: 30j (60j max)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'history' && (
                            <div className="bg-white/70 backdrop-blur-sm rounded-xl p-5 shadow-xl border border-white/20">
                                <h2 className="text-xl font-semibold text-slate-800 mb-4">Historique des Envois</h2>
                                {history.length === 0 ? (
                                    <div className="text-center py-12 text-slate-400">
                                        <Icons.History />
                                        <p className="mt-4">Aucun historique</p>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {history.slice(0, 10).map(entry => (
                                            <div key={entry.id} className="bg-white/80 rounded-lg p-4 border border-slate-200">
                                                <div className="flex justify-between items-start">
                                                    <div>
                                                        <div className="font-semibold text-slate-800">{entry.clientName}</div>
                                                        <div className="text-sm text-slate-600">{entry.documentNumber} - {formatNumber(entry.amount)} XPF</div>
                                                        <div className="text-xs text-slate-500 mt-1">{new Date(entry.date).toLocaleString('fr-FR')}</div>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        <select value={entry.status} onChange={(e) => updateEntryStatus(entry.id, e.target.value)} className="px-2 py-1 text-xs border border-slate-200 rounded bg-white">
                                                            <option value="sent">Envoy√©</option>
                                                            <option value="paid">Pay√©</option>
                                                            <option value="pending">En attente</option>
                                                        </select>
                                                        <button onClick={() => deleteEntry(entry.id)} className="p-1.5 text-red-600 hover:bg-red-50 rounded">
                                                            <Icons.Trash />
                                                        </button>
                                                    </div>
                                                </div>
                                                {entry.penaltiesAmount > 0 && (
                                                    <div className="text-xs text-orange-600 mt-2 p-2 bg-orange-50 rounded">
                                                        P√©nalit√©s: {formatNumber(entry.penaltiesAmount)} XPF | Total: {formatNumber(entry.totalDue)} XPF
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        )}

                        {activeTab === 'stats' && (
                            <div className="grid md:grid-cols-3 gap-6">
                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl border border-white/20">
                                    <div className="flex items-center gap-3">
                                        <div className="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                            <Icons.Send />
                                        </div>
                                        <div>
                                            <div className="text-2xl font-bold text-slate-800">{stats.totalSent}</div>
                                            <div className="text-sm text-slate-600">Documents envoy√©s</div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl border border-white/20">
                                    <div className="flex items-center gap-3">
                                        <div className="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                            <span className="text-2xl">üí∞</span>
                                        </div>
                                        <div>
                                            <div className="text-2xl font-bold text-slate-800">{formatNumber(stats.totalRecovered)}</div>
                                            <div className="text-sm text-slate-600">XPF recouvr√©s</div>
                                        </div>
                                    </div>
                                </div>

                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl border border-white/20">
                                    <div className="flex items-center gap-3">
                                        <div className="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                                            <span className="text-2xl">‚è≥</span>
                                        </div>
                                        <div>
                                            <div className="text-2xl font-bold text-slate-800">{formatNumber(stats.pendingAmount)}</div>
                                            <div className="text-sm text-slate-600">XPF en attente</div>
                                        </div>
                                    </div>
                                </div>

                                <div className="md:col-span-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200">
                                    <h3 className="text-lg font-semibold text-slate-800 mb-3">Taux de recouvrement</h3>
                                    <div className="text-4xl font-bold text-blue-600 mb-2">
                                        {stats.totalAmount > 0 ? Math.round((stats.totalRecovered / (stats.totalAmount + stats.totalRecovered)) * 100) : 0}%
                                    </div>
                                    <div className="w-full bg-slate-200 rounded-full h-4">
                                        <div className="bg-gradient-to-r from-blue-500 to-green-500 h-4 rounded-full" style={{width: `${stats.totalAmount > 0 ? (stats.totalRecovered / (stats.totalAmount + stats.totalRecovered)) * 100 : 0}%`}}></div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {activeTab === 'letters' && (
                            <div className="grid lg:grid-cols-2 gap-6">
                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl border border-white/20">
                                    <h2 className="text-xl font-semibold text-slate-800 mb-4">üì® Lettre de Relance AR</h2>
                                    <p className="text-sm text-slate-600 mb-4">Mod√®le formel pour relance avec accus√© de r√©ception</p>
                                    <div className="bg-slate-50 rounded-lg p-4 max-h-64 overflow-y-auto mb-4 text-xs font-mono">
                                        <pre className="whitespace-pre-wrap">
LETTRE RECOMMAND√âE AVEC AR

DEPANN'FROID
Moorea, Polyn√©sie Fran√ßaise

{clientName}
[Adresse]

Moorea, le {new Date().toLocaleDateString('fr-FR')}

Objet : Rappel facture impay√©e N¬∞ {documentNumber}

Madame, Monsieur,

Nous constatons que notre facture N¬∞ {documentNumber} 
d'un montant de {amount} XPF demeure impay√©e.

P√©nalit√©s appliqu√©es :
- Taux : 18% par an
- Indemnit√© : 4 800 XPF

D√©lai de r√®glement : 8 jours

Cordialement,
{signature}
                                        </pre>
                                    </div>
                                    <button className="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition text-sm">
                                        üì• T√©l√©charger le mod√®le
                                    </button>
                                </div>

                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl border border-white/20">
                                    <h2 className="text-xl font-semibold text-slate-800 mb-4">‚öñÔ∏è Mise en Demeure</h2>
                                    <p className="text-sm text-slate-600 mb-4">Document juridique avant proc√©dure</p>
                                    <div className="bg-slate-50 rounded-lg p-4 max-h-64 overflow-y-auto mb-4 text-xs font-mono">
                                        <pre className="whitespace-pre-wrap">
MISE EN DEMEURE FORMELLE

DEPANN'FROID
Moorea, Polyn√©sie Fran√ßaise

{clientName}

MISE EN DEMEURE
Facture N¬∞ {documentNumber}

D√âLAI IMP√âRATIF : 8 JOURS

Montants exigibles :
- Principal : {amount} XPF
- P√©nalit√©s : {...} XPF
- Indemnit√© : 4 800 XPF

Action judiciaire en cas de non-r√®glement.

{signature}
{new Date().toLocaleDateString('fr-FR')}
                                        </pre>
                                    </div>
                                    <button className="w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition text-sm">
                                        üì• T√©l√©charger certifi√©
                                    </button>
                                </div>
                            </div>
                        )}

                        {activeTab === 'signature' && (
                            <div className="grid lg:grid-cols-2 gap-6">
                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl border border-white/20">
                                    <h2 className="text-xl font-semibold text-slate-800 mb-4">‚úçÔ∏è Signature Num√©rique</h2>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Signature texte</label>
                                            <input
                                                type="text"
                                                value={signature}
                                                onChange={(e) => setSignature(e.target.value)}
                                                placeholder="Ex: Lionel - G√©rant DEPANN'FROID"
                                                className="w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white"
                                            />
                                        </div>
                                        <button
                                            onClick={async () => {
                                                await window.storage.set('user-signature', JSON.stringify({ text: signature }));
                                                alert('Signature enregistr√©e !');
                                            }}
                                            className="w-full bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 transition"
                                        >
                                            Enregistrer la signature
                                        </button>
                                    </div>
                                </div>

                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl border border-white/20">
                                    <h2 className="text-xl font-semibold text-slate-800 mb-4">üëÅÔ∏è Pr√©visualisation</h2>
                                    <div className="bg-slate-50 rounded-lg p-6 border-2 border-slate-200">
                                        <p className="text-sm text-slate-600 mb-4">Votre signature appara√Ætra ainsi :</p>
                                        <div className="border-t-2 border-slate-300 pt-4">
                                            <div className="text-center">
                                                <p className="text-sm text-slate-500 mb-2">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</p>
                                                <p className="font-semibold text-slate-800">SIGNATURE NUM√âRIQUE</p>
                                                <p className="text-slate-700 my-2">{signature}</p>
                                                <p className="text-xs text-slate-400 mt-2">{new Date().toLocaleString('fr-FR')}</p>
                                                <p className="text-sm text-slate-500 mt-2">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
