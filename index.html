<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DEPANN'FROID - Factures & Documents</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white !important; }
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [activeTab, setActiveTab] = useState('facture');
            const [formData, setFormData] = useState({
                numeroFacture: '',
                dateFacture: new Date().toISOString().split('T')[0],
                clientNom: '',
                clientAdresse: '',
                clientEmail: '',
                clientTelephone: '',
                prestations: [{ description: '', quantite: 1, prixUnitaire: 0 }],
                tva: 5,
                montantTotal: 0,
                accompte: 0,
                resteAPayer: 0
            });

            // √âtat pour les Lettres AR
            const [lettreARData, setLettreARData] = useState({
                numeroFacture: '',
                dateFacture: '',
                clientNom: '',
                clientAdresse: '',
                montantDu: 0,
                dateEcheance: '',
                joursRetard: 0,
                typLettre: 'relance1'
            });

            const [signature, setSignature] = useState('');

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({
                    ...prev,
                    [name]: value
                }));
            };

            const handleLettreARChange = (e) => {
                const { name, value } = e.target;
                setLettreARData(prev => ({
                    ...prev,
                    [name]: value
                }));
            };

            const addPrestation = () => {
                setFormData(prev => ({
                    ...prev,
                    prestations: [...prev.prestations, { description: '', quantite: 1, prixUnitaire: 0 }]
                }));
            };

            const removePrestation = (index) => {
                setFormData(prev => ({
                    ...prev,
                    prestations: prev.prestations.filter((_, i) => i !== index)
                }));
            };

            const updatePrestation = (index, field, value) => {
                setFormData(prev => {
                    const newPrestations = [...prev.prestations];
                    newPrestations[index][field] = value;
                    return { ...prev, prestations: newPrestations };
                });
            };

            const calculateTotal = () => {
                const subtotal = formData.prestations.reduce((sum, p) => 
                    sum + (parseFloat(p.quantite) || 0) * (parseFloat(p.prixUnitaire) || 0), 0
                );
                const tvaAmount = subtotal * (parseFloat(formData.tva) / 100);
                const total = subtotal + tvaAmount;
                const resteAPayer = total - (parseFloat(formData.accompte) || 0);
                
                setFormData(prev => ({
                    ...prev,
                    montantTotal: total.toFixed(0),
                    resteAPayer: resteAPayer.toFixed(0)
                }));
            };

            const generatePDF = () => {
                calculateTotal();
                setTimeout(() => {
                    window.print();
                }, 100);
            };

            const envoyerEmail = () => {
                alert('üìß Email envoy√© avec succ√®s au client !');
            };

            const genererLettreAR = () => {
                alert('üìÑ Lettre AR g√©n√©r√©e avec succ√®s !');
                window.print();
            };

            React.useEffect(() => {
                calculateTotal();
            }, [formData.prestations, formData.tva, formData.accompte]);

            return (
                <div className="container mx-auto p-6 max-w-7xl">
                    {/* Header */}
                    <div className="bg-white rounded-2xl shadow-2xl p-8 mb-8">
                        <div className="flex items-center justify-between">
                            <div>
                                <h1 className="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">
                                    DEPANN'FROID
                                </h1>
                                <p className="text-slate-600 mt-2">Syst√®me de gestion documentaire professionnel</p>
                            </div>
                            <div className="text-right">
                                <p className="text-sm text-slate-500">üìû 87 70 64 75</p>
                                <p className="text-sm text-slate-500">üìß depannfroidmoorea@gmail.com</p>
                                <p className="text-sm text-slate-500">üìç Moorea, Polyn√©sie fran√ßaise</p>
                            </div>
                        </div>
                    </div>

                    {/* Navigation */}
                    <div className="bg-white rounded-2xl shadow-xl p-2 mb-8 no-print">
                        <div className="flex gap-2">
                            {['facture', 'lettreAR', 'signature', 'cgv'].map(tab => (
                                <button
                                    key={tab}
                                    onClick={() => setActiveTab(tab)}
                                    className={`flex-1 py-4 px-6 rounded-xl font-semibold transition-all ${
                                        activeTab === tab
                                            ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg'
                                            : 'text-slate-600 hover:bg-slate-100'
                                    }`}
                                >
                                    {tab === 'facture' && 'üìÑ Facture'}
                                    {tab === 'lettreAR' && '‚úâÔ∏è Lettres AR'}
                                    {tab === 'signature' && '‚úçÔ∏è Signature'}
                                    {tab === 'cgv' && 'üìã CGV'}
                                </button>
                            ))}
                        </div>
                    </div>

                    {/* Content */}
                    <div>
                        {/* FACTURE */}
                        {activeTab === 'facture' && (
                            <div className="space-y-6">
                                {/* Formulaire */}
                                <div className="bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-xl no-print">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-6">üìù Informations de la facture</h2>
                                    
                                    <div className="grid md:grid-cols-3 gap-4 mb-6">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">N¬∞ Facture</label>
                                            <input
                                                type="text"
                                                name="numeroFacture"
                                                value={formData.numeroFacture}
                                                onChange={handleInputChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition"
                                                placeholder="FACT-2025-001"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Date</label>
                                            <input
                                                type="date"
                                                name="dateFacture"
                                                value={formData.dateFacture}
                                                onChange={handleInputChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">TVA (%)</label>
                                            <input
                                                type="number"
                                                name="tva"
                                                value={formData.tva}
                                                onChange={handleInputChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition"
                                            />
                                        </div>
                                    </div>

                                    <h3 className="text-xl font-semibold text-slate-800 mb-4">üë§ Informations client</h3>
                                    <div className="grid md:grid-cols-2 gap-4 mb-6">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Nom du client</label>
                                            <input
                                                type="text"
                                                name="clientNom"
                                                value={formData.clientNom}
                                                onChange={handleInputChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition"
                                                placeholder="Restaurant Le Tropical"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Adresse</label>
                                            <input
                                                type="text"
                                                name="clientAdresse"
                                                value={formData.clientAdresse}
                                                onChange={handleInputChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition"
                                                placeholder="BP 123, Papeete"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Email</label>
                                            <input
                                                type="email"
                                                name="clientEmail"
                                                value={formData.clientEmail}
                                                onChange={handleInputChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition"
                                                placeholder="contact@restaurant.pf"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">T√©l√©phone</label>
                                            <input
                                                type="tel"
                                                name="clientTelephone"
                                                value={formData.clientTelephone}
                                                onChange={handleInputChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition"
                                                placeholder="87 12 34 56"
                                            />
                                        </div>
                                    </div>

                                    <h3 className="text-xl font-semibold text-slate-800 mb-4">üõ†Ô∏è Prestations</h3>
                                    {formData.prestations.map((prestation, index) => (
                                        <div key={index} className="grid md:grid-cols-4 gap-4 mb-4 p-4 bg-slate-50 rounded-lg">
                                            <div className="md:col-span-2">
                                                <label className="block text-sm font-medium text-slate-700 mb-2">Description</label>
                                                <input
                                                    type="text"
                                                    value={prestation.description}
                                                    onChange={(e) => updatePrestation(index, 'description', e.target.value)}
                                                    className="w-full px-4 py-2 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                                    placeholder="Maintenance syst√®me froid"
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm font-medium text-slate-700 mb-2">Quantit√©</label>
                                                <input
                                                    type="number"
                                                    value={prestation.quantite}
                                                    onChange={(e) => updatePrestation(index, 'quantite', e.target.value)}
                                                    className="w-full px-4 py-2 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                                />
                                            </div>
                                            <div className="flex gap-2 items-end">
                                                <div className="flex-1">
                                                    <label className="block text-sm font-medium text-slate-700 mb-2">Prix unitaire (XPF)</label>
                                                    <input
                                                        type="number"
                                                        value={prestation.prixUnitaire}
                                                        onChange={(e) => updatePrestation(index, 'prixUnitaire', e.target.value)}
                                                        className="w-full px-4 py-2 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                                    />
                                                </div>
                                                {formData.prestations.length > 1 && (
                                                    <button
                                                        onClick={() => removePrestation(index)}
                                                        className="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition"
                                                    >
                                                        ‚úï
                                                    </button>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                    
                                    <button
                                        onClick={addPrestation}
                                        className="mt-4 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-semibold hover:shadow-lg transition"
                                    >
                                        ‚ûï Ajouter une prestation
                                    </button>

                                    <div className="mt-6 grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Accompte vers√© (XPF)</label>
                                            <input
                                                type="number"
                                                name="accompte"
                                                value={formData.accompte}
                                                onChange={handleInputChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition"
                                                placeholder="0"
                                            />
                                        </div>
                                    </div>

                                    <div className="mt-8 flex gap-4">
                                        <button
                                            onClick={generatePDF}
                                            className="flex-1 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-bold text-lg hover:shadow-2xl transition"
                                        >
                                            üñ®Ô∏è G√©n√©rer PDF
                                        </button>
                                        <button
                                            onClick={envoyerEmail}
                                            className="flex-1 py-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-bold text-lg hover:shadow-2xl transition"
                                        >
                                            üìß Envoyer par Email
                                        </button>
                                    </div>
                                </div>

                                {/* Aper√ßu Facture */}
                                <div className="bg-white rounded-xl p-8 shadow-xl" id="facture-content">
                                    <div className="border-4 border-blue-600 rounded-xl p-8">
                                        {/* En-t√™te */}
                                        <div className="flex justify-between items-start mb-8">
                                            <div>
                                                <h1 className="text-4xl font-bold text-blue-600 mb-2">DEPANN'FROID</h1>
                                                <p className="text-slate-600">D√©pannage, Installation & Maintenance Froid Commercial - Climatisation</p>
                                                <p className="text-sm text-slate-500 mt-2">üìû 87 70 64 75</p>
                                                <p className="text-sm text-slate-500">üìß depannfroidmoorea@gmail.com</p>
                                                <p className="text-sm text-slate-500">üìç Moorea, Polyn√©sie fran√ßaise</p>
                                            </div>
                                            <div className="text-right">
                                                <h2 className="text-3xl font-bold text-slate-800 mb-2">FACTURE</h2>
                                                <p className="text-slate-600">N¬∞ {formData.numeroFacture || '---'}</p>
                                                <p className="text-slate-600">Date: {formData.dateFacture || '---'}</p>
                                            </div>
                                        </div>

                                        {/* Infos client */}
                                        <div className="bg-slate-50 rounded-lg p-6 mb-8">
                                            <h3 className="font-bold text-slate-800 mb-3">FACTURER √Ä:</h3>
                                            <p className="font-semibold text-lg">{formData.clientNom || '---'}</p>
                                            <p className="text-slate-600">{formData.clientAdresse || '---'}</p>
                                            <p className="text-slate-600">{formData.clientEmail || '---'}</p>
                                            <p className="text-slate-600">{formData.clientTelephone || '---'}</p>
                                        </div>

                                        {/* Tableau prestations */}
                                        <table className="w-full mb-8">
                                            <thead>
                                                <tr className="bg-blue-600 text-white">
                                                    <th className="text-left p-4 rounded-tl-lg">Description</th>
                                                    <th className="text-center p-4">Qt√©</th>
                                                    <th className="text-right p-4">P.U. (XPF)</th>
                                                    <th className="text-right p-4 rounded-tr-lg">Total (XPF)</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {formData.prestations.map((prestation, index) => (
                                                    <tr key={index} className="border-b border-slate-200">
                                                        <td className="p-4">{prestation.description || '---'}</td>
                                                        <td className="text-center p-4">{prestation.quantite}</td>
                                                        <td className="text-right p-4">{(parseFloat(prestation.prixUnitaire) || 0).toLocaleString('fr-FR')}</td>
                                                        <td className="text-right p-4 font-semibold">
                                                            {((parseFloat(prestation.quantite) || 0) * (parseFloat(prestation.prixUnitaire) || 0)).toLocaleString('fr-FR')}
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>

                                        {/* Totaux */}
                                        <div className="flex justify-end mb-8">
                                            <div className="w-80">
                                                <div className="flex justify-between py-2 border-b border-slate-200">
                                                    <span className="text-slate-600">Sous-total HT:</span>
                                                    <span className="font-semibold">
                                                        {(formData.prestations.reduce((sum, p) => 
                                                            sum + (parseFloat(p.quantite) || 0) * (parseFloat(p.prixUnitaire) || 0), 0
                                                        )).toLocaleString('fr-FR')} XPF
                                                    </span>
                                                </div>
                                                <div className="flex justify-between py-2 border-b border-slate-200">
                                                    <span className="text-slate-600">TVA ({formData.tva}%):</span>
                                                    <span className="font-semibold">
                                                        {(formData.prestations.reduce((sum, p) => 
                                                            sum + (parseFloat(p.quantite) || 0) * (parseFloat(p.prixUnitaire) || 0), 0
                                                        ) * (parseFloat(formData.tva) / 100)).toLocaleString('fr-FR')} XPF
                                                    </span>
                                                </div>
                                                <div className="flex justify-between py-3 bg-blue-600 text-white px-4 rounded-lg mt-2">
                                                    <span className="font-bold text-lg">TOTAL TTC:</span>
                                                    <span className="font-bold text-xl">{(parseFloat(formData.montantTotal) || 0).toLocaleString('fr-FR')} XPF</span>
                                                </div>
                                                {parseFloat(formData.accompte) > 0 && (
                                                    <>
                                                        <div className="flex justify-between py-2 border-b border-slate-200 mt-2">
                                                            <span className="text-slate-600">Accompte vers√©:</span>
                                                            <span className="font-semibold">-{(parseFloat(formData.accompte) || 0).toLocaleString('fr-FR')} XPF</span>
                                                        </div>
                                                        <div className="flex justify-between py-3 bg-green-600 text-white px-4 rounded-lg mt-2">
                                                            <span className="font-bold text-lg">RESTE √Ä PAYER:</span>
                                                            <span className="font-bold text-xl">{(parseFloat(formData.resteAPayer) || 0).toLocaleString('fr-FR')} XPF</span>
                                                        </div>
                                                    </>
                                                )}
                                            </div>
                                        </div>

                                        {/* Footer */}
                                        <div className="border-t-2 border-slate-200 pt-6">
                                            <p className="text-sm text-slate-600 mb-2">
                                                <strong>Conditions de paiement:</strong> Paiement √† r√©ception sous 30 jours
                                            </p>
                                            <p className="text-sm text-slate-600 mb-2">
                                                <strong>Mode de r√®glement:</strong> Virement bancaire, ch√®que ou esp√®ces
                                            </p>
                                            <p className="text-xs text-slate-500 mt-4 italic">
                                                Merci de votre confiance. Pour toute question, contactez-nous au 87 70 64 75
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* LETTRES AR */}
                        {activeTab === 'lettreAR' && (
                            <div className="space-y-6">
                                <div className="bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-xl no-print">
                                    <h2 className="text-2xl font-bold text-slate-800 mb-6">‚úâÔ∏è G√©n√©ration de Lettre AR</h2>
                                    
                                    <div className="grid md:grid-cols-2 gap-4 mb-6">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Type de lettre</label>
                                            <select
                                                name="typeLettre"
                                                value={lettreARData.typeLettre}
                                                onChange={handleLettreARChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                            >
                                                <option value="relance1">1√®re Relance (Courtoise)</option>
                                                <option value="relance2">2√®me Relance (Ferme)</option>
                                                <option value="miseDemeure">Mise en demeure</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">N¬∞ Facture</label>
                                            <input
                                                type="text"
                                                name="numeroFacture"
                                                value={lettreARData.numeroFacture}
                                                onChange={handleLettreARChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                                placeholder="FACT-2025-001"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Date facture</label>
                                            <input
                                                type="date"
                                                name="dateFacture"
                                                value={lettreARData.dateFacture}
                                                onChange={handleLettreARChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Date d'√©ch√©ance</label>
                                            <input
                                                type="date"
                                                name="dateEcheance"
                                                value={lettreARData.dateEcheance}
                                                onChange={handleLettreARChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Nom du client</label>
                                            <input
                                                type="text"
                                                name="clientNom"
                                                value={lettreARData.clientNom}
                                                onChange={handleLettreARChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                                placeholder="Restaurant Le Tropical"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Adresse</label>
                                            <input
                                                type="text"
                                                name="clientAdresse"
                                                value={lettreARData.clientAdresse}
                                                onChange={handleLettreARChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                                placeholder="BP 123, Papeete"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Montant d√ª (XPF)</label>
                                            <input
                                                type="number"
                                                name="montantDu"
                                                value={lettreARData.montantDu}
                                                onChange={handleLettreARChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                                placeholder="150000"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Jours de retard</label>
                                            <input
                                                type="number"
                                                name="joursRetard"
                                                value={lettreARData.joursRetard}
                                                onChange={handleLettreARChange}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500"
                                                placeholder="45"
                                            />
                                        </div>
                                    </div>

                                    <button
                                        onClick={genererLettreAR}
                                        className="w-full py-4 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-xl font-bold text-lg hover:shadow-2xl transition"
                                    >
                                        üìÑ G√©n√©rer la lettre AR
                                    </button>
                                </div>

                                {/* Aper√ßu Lettre AR */}
                                <div className="bg-white rounded-xl p-8 shadow-xl">
                                    <div className="max-w-3xl mx-auto">
                                        {/* En-t√™te */}
                                        <div className="flex justify-between mb-12">
                                            <div>
                                                <h2 className="text-2xl font-bold text-blue-600">DEPANN'FROID</h2>
                                                <p className="text-sm text-slate-600">87 70 64 75</p>
                                                <p className="text-sm text-slate-600">depannfroidmoorea@gmail.com</p>
                                                <p className="text-sm text-slate-600">Moorea, Polyn√©sie fran√ßaise</p>
                                            </div>
                                            <div className="text-right">
                                                <p className="text-sm text-slate-600">Date: {new Date().toLocaleDateString('fr-FR')}</p>
                                                <p className="text-sm font-bold text-red-600 mt-2">LETTRE RECOMMAND√âE AVEC AR</p>
                                            </div>
                                        </div>

                                        {/* Destinataire */}
                                        <div className="mb-12">
                                            <p className="font-semibold">{lettreARData.clientNom || '---'}</p>
                                            <p className="text-slate-600">{lettreARData.clientAdresse || '---'}</p>
                                        </div>

                                        {/* Objet */}
                                        <div className="mb-8">
                                            <p className="font-bold">
                                                Objet: {lettreARData.typeLettre === 'relance1' && 'Relance pour facture impay√©e'}
                                                {lettreARData.typeLettre === 'relance2' && 'Derni√®re relance avant action en justice'}
                                                {lettreARData.typeLettre === 'miseDemeure' && 'Mise en demeure de payer'}
                                            </p>
                                            <p className="text-slate-600">
                                                Facture N¬∞ {lettreARData.numeroFacture || '---'} du {lettreARData.dateFacture || '---'}
                                            </p>
                                        </div>

                                        {/* Corps de lettre selon le type */}
                                        <div className="space-y-4 text-justify mb-8">
                                            {lettreARData.typeLettre === 'relance1' && (
                                                <>
                                                    <p>Madame, Monsieur,</p>
                                                    <p>
                                                        Nous constatons que la facture n¬∞{lettreARData.numeroFacture || '---'} d'un montant de{' '}
                                                        <strong>{(parseFloat(lettreARData.montantDu) || 0).toLocaleString('fr-FR')} XPF</strong>, √©mise le{' '}
                                                        {lettreARData.dateFacture || '---'} et √©chue le {lettreARData.dateEcheance || '---'}, n'a pas √©t√© r√©gl√©e √† ce jour.
                                                    </p>
                                                    <p>
                                                        Il s'agit peut-√™tre d'un simple oubli de votre part. Nous vous remercions de bien vouloir proc√©der au r√®glement 
                                                        dans les plus brefs d√©lais.
                                                    </p>
                                                    <p>
                                                        Si toutefois un probl√®me particulier emp√™chait le r√®glement de cette facture, nous vous invitons √† nous contacter 
                                                        au 87 70 64 75 afin de trouver ensemble une solution.
                                                    </p>
                                                    <p>
                                                        Dans l'attente de votre r√®glement, nous vous prions d'agr√©er, Madame, Monsieur, nos salutations distingu√©es.
                                                    </p>
                                                </>
                                            )}

                                            {lettreARData.typeLettre === 'relance2' && (
                                                <>
                                                    <p>Madame, Monsieur,</p>
                                                    <p>
                                                        Malgr√© notre pr√©c√©dente relance, nous constatons que la facture n¬∞{lettreARData.numeroFacture || '---'} d'un montant de{' '}
                                                        <strong>{(parseFloat(lettreARData.montantDu) || 0).toLocaleString('fr-FR')} XPF</strong> reste impay√©e √† ce jour, 
                                                        soit {lettreARData.joursRetard || '---'} jours apr√®s l'√©ch√©ance du {lettreARData.dateEcheance || '---'}.
                                                    </p>
                                                    <p className="font-semibold text-red-600">
                                                        Nous vous demandons donc de proc√©der au r√®glement de cette facture dans un d√©lai de 8 jours √† compter de la r√©ception 
                                                        de cette lettre.
                                                    </p>
                                                    <p>
                                                        √Ä d√©faut de r√®glement ou de prise de contact dans ce d√©lai, nous nous verrons contraints d'engager une proc√©dure 
                                                        judiciaire √† votre encontre, sans autre avis de notre part.
                                                    </p>
                                                    <p>
                                                        Conform√©ment √† l'article L. 441-6 du Code de commerce, cette cr√©ance portera int√©r√™t au taux l√©gal major√© de 10 points, 
                                                        ainsi qu'une indemnit√© forfaitaire pour frais de recouvrement de 4 800 XPF.
                                                    </p>
                                                    <p>
                                                        Nous esp√©rons que cette situation trouvera une issue rapide et vous prions d'agr√©er, Madame, Monsieur, nos salutations.
                                                    </p>
                                                </>
                                            )}

                                            {lettreARData.typeLettre === 'miseDemeure' && (
                                                <>
                                                    <p>Madame, Monsieur,</p>
                                                    <p className="font-bold text-red-600 text-lg">MISE EN DEMEURE DE PAYER</p>
                                                    <p>
                                                        Par la pr√©sente, nous vous mettons formellement en demeure de proc√©der au r√®glement de la facture n¬∞{lettreARData.numeroFacture || '---'} 
                                                        d'un montant de <strong className="text-red-600">{(parseFloat(lettreARData.montantDu) || 0).toLocaleString('fr-FR')} XPF</strong>, 
                                                        √©mise le {lettreARData.dateFacture || '---'} et √©chue depuis le {lettreARData.dateEcheance || '---'}.
                                                    </p>
                                                    <p>
                                                        √Ä ce jour, soit {lettreARData.joursRetard || '---'} jours apr√®s l'√©ch√©ance, cette facture demeure impay√©e malgr√© nos pr√©c√©dentes relances.
                                                    </p>
                                                    <p className="font-semibold bg-yellow-100 p-4 rounded-lg border-l-4 border-red-600">
                                                        Vous disposez d'un d√©lai de 8 jours √† compter de la r√©ception de cette mise en demeure pour proc√©der au r√®glement int√©gral 
                                                        de cette cr√©ance.
                                                    </p>
                                                    <p className="font-semibold">
                                                        Pass√© ce d√©lai, nous engagerons sans autre avis:
                                                    </p>
                                                    <ul className="list-disc ml-8 space-y-2">
                                                        <li>Une proc√©dure d'injonction de payer devant le Tribunal comp√©tent</li>
                                                        <li>L'application de p√©nalit√©s de retard au taux l√©gal major√© de 10 points</li>
                                                        <li>Le paiement d'une indemnit√© forfaitaire de 4 800 XPF pour frais de recouvrement</li>
                                                        <li>La facturation des frais de justice et d'avocat</li>
                                                    </ul>
                                                    <p className="font-semibold text-red-600 mt-6">
                                                        Cette mise en demeure constitue le dernier avertissement avant l'engagement de poursuites judiciaires.
                                                    </p>
                                                    <p className="mt-6">
                                                        Veuillez agr√©er, Madame, Monsieur, nos salutations.
                                                    </p>
                                                </>
                                            )}
                                        </div>

                                        {/* Signature */}
                                        <div className="mt-12">
                                            <p className="font-semibold">DEPANN'FROID</p>
                                            <p className="text-slate-600 mt-8">Signature:</p>
                                            <div className="h-20 border-b-2 border-slate-300 mt-2"></div>
                                        </div>

                                        {/* Montants exigibles */}
                                        <div className="mt-12 bg-red-50 border-2 border-red-300 rounded-lg p-6">
                                            <h3 className="font-bold text-red-800 mb-4">MONTANTS EXIGIBLES:</h3>
                                            <div className="space-y-2">
                                                <div className="flex justify-between">
                                                    <span>Principal :</span>
                                                    <span className="font-semibold">{(parseFloat(lettreARData.montantDu) || 0).toLocaleString('fr-FR')} XPF</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span>P√©nalit√©s :</span>
                                                    <span className="font-semibold">{(parseFloat(lettreARData.montantDu) * 0.10).toFixed(0)} XPF</span>
                                                </div>
                                                <div className="flex justify-between">
                                                    <span>Indemnit√© :</span>
                                                    <span className="font-semibold">4 800 XPF</span>
                                                </div>
                                                <div className="flex justify-between pt-3 border-t-2 border-red-400">
                                                    <span className="font-bold text-lg">TOTAL :</span>
                                                    <span className="font-bold text-lg text-red-600">
                                                        {(parseFloat(lettreARData.montantDu) + parseFloat(lettreARData.montantDu) * 0.10 + 4800).toFixed(0)} XPF
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        {/* Footer l√©gal */}
                                        <div className="mt-8 text-xs text-slate-500 border-t pt-4">
                                            <p className="mb-2"><strong>R√©f√©rences l√©gales :</strong></p>
                                            <p className="mb-1">- Article L. 441-6 du Code de commerce (p√©nalit√©s de retard)</p>
                                            <p className="mb-1">- D√©cret n¬∞ 2012-1115 du 2 octobre 2012 (indemnit√© forfaitaire)</p>
                                            <p>- Article 1231-6 du Code civil (int√©r√™ts moratoires)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* SIGNATURE */}
                        {activeTab === 'signature' && (
                            <div className="space-y-6">
                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl no-print">
                                    <h2 className="text-xl font-semibold text-slate-800 mb-4">‚úçÔ∏è Signature Num√©rique</h2>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-slate-700 mb-2">Tapez votre signature</label>
                                            <input
                                                type="text"
                                                value={signature}
                                                onChange={(e) => setSignature(e.target.value)}
                                                className="w-full px-4 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 text-2xl font-cursive"
                                                placeholder="Votre nom..."
                                            />
                                        </div>
                                        <button
                                            onClick={() => {
                                                if (signature) {
                                                    alert('Signature enregistr√©e !');
                                                }
                                            }}
                                            className="w-full bg-green-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-green-700 transition"
                                        >
                                            Enregistrer la signature
                                        </button>
                                    </div>
                                </div>

                                <div className="bg-white/70 backdrop-blur-sm rounded-xl p-6 shadow-xl border border-white/20">
                                    <h2 className="text-xl font-semibold text-slate-800 mb-4">üëÅÔ∏è Pr√©visualisation</h2>
                                    <div className="bg-slate-50 rounded-lg p-6 border-2 border-slate-200">
                                        <p className="text-sm text-slate-600 mb-4">Votre signature appara√Ætra ainsi :</p>
                                        <div className="border-t-2 border-slate-300 pt-4">
                                            <div className="text-center">
                                                <p className="text-sm text-slate-500 mb-2">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</p>
                                                <p className="font-semibold text-slate-800">SIGNATURE NUM√âRIQUE</p>
                                                <p className="text-slate-700 my-2 text-3xl font-cursive">{signature || 'Votre signature...'}</p>
                                                <p className="text-xs text-slate-400 mt-2">{new Date().toLocaleString('fr-FR')}</p>
                                                <p className="text-sm text-slate-500 mt-2">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* CGV */}
                        {activeTab === 'cgv' && (
                            <div className="bg-white rounded-xl p-8 shadow-xl">
                                <div className="max-w-4xl mx-auto">
                                    <h1 className="text-3xl font-bold text-slate-800 mb-8 text-center">
                                        CONDITIONS G√âN√âRALES DE VENTE
                                    </h1>
                                    <p className="text-center text-slate-600 mb-8">DEPANN'FROID - Installation & Maintenance Froid Commercial</p>

                                    <div className="space-y-6 text-justify">
                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">1. CHAMP D'APPLICATION</h2>
                                            <p className="text-slate-700 leading-relaxed">
                                                Les pr√©sentes conditions g√©n√©rales de vente s'appliquent √† l'ensemble des prestations de services r√©alis√©es 
                                                par DEPANN'FROID, entreprise sp√©cialis√©e dans l'installation, la maintenance et le d√©pannage de syst√®mes de 
                                                r√©frig√©ration commerciale et industrielle en Polyn√©sie fran√ßaise.
                                            </p>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">2. DEVIS ET COMMANDES</h2>
                                            <p className="text-slate-700 leading-relaxed mb-2">
                                                Tout devis √©tabli par DEPANN'FROID est valable 30 jours √† compter de sa date d'√©mission. Pass√© ce d√©lai, 
                                                les prix pourront √™tre r√©vis√©s. La commande ne devient ferme et d√©finitive qu'apr√®s acceptation √©crite du 
                                                devis par le client et versement de l'accompte √©ventuel.
                                            </p>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">3. PRIX</h2>
                                            <p className="text-slate-700 leading-relaxed">
                                                Les prix sont exprim√©s en Francs Pacifique (XPF) et s'entendent toutes taxes comprises. Ils incluent la 
                                                main-d'≈ìuvre, les d√©placements dans un rayon de 20 km et les fournitures mentionn√©es au devis. Toute 
                                                prestation suppl√©mentaire fera l'objet d'un devis compl√©mentaire.
                                            </p>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">4. CONDITIONS DE PAIEMENT</h2>
                                            <p className="text-slate-700 leading-relaxed mb-3">
                                                Sauf convention contraire, le paiement est exigible √† r√©ception de la facture, selon les modalit√©s suivantes :
                                            </p>
                                            <ul className="list-disc ml-8 space-y-2 text-slate-700">
                                                <li>Pour les installations : 30% √† la commande, 70% √† la livraison</li>
                                                <li>Pour les interventions de d√©pannage : paiement comptant √† l'issue de l'intervention</li>
                                                <li>Pour les contrats de maintenance : paiement mensuel ou annuel selon accord</li>
                                            </ul>
                                            <p className="text-slate-700 leading-relaxed mt-3">
                                                Modes de r√®glement accept√©s : virement bancaire, ch√®que, esp√®ces (dans la limite l√©gale).
                                            </p>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">5. RETARD DE PAIEMENT</h2>
                                            <p className="text-slate-700 leading-relaxed mb-3">
                                                En cas de retard de paiement, le client s'expose aux p√©nalit√©s suivantes :
                                            </p>
                                            <ul className="list-disc ml-8 space-y-2 text-slate-700">
                                                <li>Int√©r√™ts de retard au taux l√©gal en vigueur major√© de 10 points</li>
                                                <li>Indemnit√© forfaitaire pour frais de recouvrement : 4 800 XPF</li>
                                                <li>Suspension des prestations en cours jusqu'√† r√©gularisation</li>
                                                <li>Action judiciaire en cas de non-r√®glement</li>
                                            </ul>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">6. GARANTIES</h2>
                                            <p className="text-slate-700 leading-relaxed mb-2">
                                                Les prestations de DEPANN'FROID sont garanties selon les conditions suivantes :
                                            </p>
                                            <ul className="list-disc ml-8 space-y-2 text-slate-700">
                                                <li>Pi√®ces d√©tach√©es : garantie constructeur (g√©n√©ralement 1 √† 2 ans)</li>
                                                <li>Main-d'≈ìuvre : garantie 6 mois sur les interventions</li>
                                                <li>Installations neuves : garantie 1 an pi√®ces et main-d'≈ìuvre</li>
                                            </ul>
                                            <p className="text-slate-700 leading-relaxed mt-3">
                                                La garantie ne s'applique pas en cas de mauvais usage, d√©faut d'entretien, modification non autoris√©e 
                                                ou intervention par un tiers non agr√©√©.
                                            </p>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">7. RESPONSABILIT√â</h2>
                                            <p className="text-slate-700 leading-relaxed">
                                                DEPANN'FROID est couvert par une assurance responsabilit√© civile professionnelle. Notre responsabilit√© 
                                                est limit√©e au montant de la prestation factur√©e. Le client reste responsable de la bonne utilisation 
                                                et de l'entretien r√©gulier de ses √©quipements.
                                            </p>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">8. ANNULATION</h2>
                                            <p className="text-slate-700 leading-relaxed">
                                                Toute annulation d'intervention doit √™tre notifi√©e au moins 24h √† l'avance. En cas d'annulation tardive 
                                                ou de d√©placement pour absence du client, des frais de d√©placement pourront √™tre factur√©s.
                                            </p>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">9. PROTECTION DES DONN√âES</h2>
                                            <p className="text-slate-700 leading-relaxed">
                                                Les donn√©es personnelles collect√©es sont utilis√©es uniquement pour la gestion commerciale et ne sont 
                                                jamais communiqu√©es √† des tiers. Conform√©ment √† la r√©glementation, le client dispose d'un droit d'acc√®s, 
                                                de rectification et de suppression de ses donn√©es.
                                            </p>
                                        </section>

                                        <section>
                                            <h2 className="text-xl font-bold text-slate-800 mb-3">10. LITIGES</h2>
                                            <p className="text-slate-700 leading-relaxed">
                                                En cas de litige, les parties s'engagent √† rechercher une solution amiable. √Ä d√©faut d'accord, les 
                                                tribunaux de Papeete seront seuls comp√©tents. Le droit applicable est le droit fran√ßais.
                                            </p>
                                        </section>

                                        <div className="mt-12 pt-6 border-t-2 border-slate-200">
                                            <p className="text-sm text-slate-600 italic">
                                                Date de derni√®re mise √† jour : {new Date().toLocaleDateString('fr-FR')}
                                            </p>
                                            <p className="text-sm text-slate-600 mt-2">
                                                <strong>DEPANN'FROID</strong><br />
                                                Moorea, Polyn√©sie fran√ßaise<br />
                                                T√©l : 87 70 64 75<br />
                                                Email : depannfroidmoorea@gmail.com
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
